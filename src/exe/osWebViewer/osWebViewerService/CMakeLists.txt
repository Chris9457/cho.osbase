set(WEBVIEWERSERVICE ${OS_WEBVIEWER}.service)

set(SRC_DIR src)
file(GLOB SRC_FILES ${SRC_DIR}/*)

if (NOT OS_WEBVIEW_INSTALL_DIR)
	set(OS_WEBVIEW_INSTALL_DIR webviewer)
endif()

add_executable(${WEBVIEWERSERVICE} ${SRC_FILES} ${RESOURCES_FILES})
target_link_libraries(${WEBVIEWERSERVICE} 
					  PRIVATE 
						${OSBASE}.webviewer.impl
						${OSBASE}.core.impl
						${OSBASE}.data.impl
					 )

target_compile_definitions(${WEBVIEWERSERVICE} PRIVATE SETTING_FILE_NAME="${SETTING_FILE_NAME}")

add_custom_command(TARGET ${WEBVIEWERSERVICE} POST_BUILD
				   COMMAND ${CMAKE_COMMAND} -E echo $<TARGET_RUNTIME_DLLS:${WEBVIEWERSERVICE}> COMMAND_EXPAND_LISTS 					
)

install(TARGETS ${WEBVIEWERSERVICE} DESTINATION ${OS_WEBVIEW_INSTALL_DIR})
install(DIRECTORY $<TARGET_FILE_DIR:${OS_WEBVIEWER}.impl>/resources DESTINATION ${OS_WEBVIEW_INSTALL_DIR})
install_deps(TARGET ${WEBVIEWERSERVICE} DESTINATION ${OS_WEBVIEW_INSTALL_DIR})
